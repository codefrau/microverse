"use strict";(globalThis.webpackChunk_croquet_microverse=globalThis.webpackChunk_croquet_microverse||[]).push([[225],{1225:(a,t,e)=>{e.r(t),e.d(t,{default:()=>r});const r={modules:[{name:"CampusMap",pawnBehaviors:[class CampusMapPawn{setup(){let a=new Worldcore.THREE.Matrix4,t=new Worldcore.THREE.Matrix4,e=new Worldcore.THREE.Matrix4,r=new Worldcore.THREE.Matrix4,i=new Worldcore.THREE.Matrix4;r.makeRotationY(.59294134694891),e.makeRotationX(Math.PI/2);t.makeScale(7.3/825,9.3/825,9/825),i.makeRotationY(-.59294134694891),a.makeTranslation(9.42,-.66,-20.46),this.mapMatrix=new Worldcore.THREE.Matrix4,this.mapMatrix.multiply(a),this.mapMatrix.multiply(i),this.mapMatrix.multiply(t),this.mapMatrix.multiply(e),this.mapMatrix.multiply(r);let s=Worldcore.THREE;this.balls&&this.balls.forEach(a=>{this.shape.remove(a),a.geometry.dispose(),a.material.dispose()}),this.shape.children=[],this.balls=[],this.geometry&&this.geometry.dispose(),this.geometry=new s.SphereGeometry(.02,16,8),this.avatarMaterial&&this.avatarMaterial.dispose(),this.avatarMaterial=new s.MeshStandardMaterial({color:13378082}),this.cardMaterial&&this.cardMaterial.dispose(),this.cardMaterial=new s.MeshStandardMaterial({color:2280482}),void 0===this.mapRunning&&(this.mapRunning=!0,this.updateMap())}updateMap(){if(this.mapRunning){this.future(250).updateMap();this.actor.service("PlayerManager").players;let a=this.actor.queryCards();for(a=(a=(a=a.filter(a=>!a._parent)).filter(a=>"world model"!==a._name)).filter(a=>"light"!==a._name);this.balls.length<a.length;){var t=new Worldcore.THREE.Mesh(this.geometry,this.cardMaterial);this.balls.push(t),this.shape.add(t)}for(;this.balls.length>a.length;){var e=this.balls.pop();this.shape.remove(e)}let i=this._translation;a.forEach((a,t)=>{var e=a.translation;let r=new Worldcore.THREE.Vector3(e[0],0,e[2]);r.applyMatrix4(this.mapMatrix);e="AvatarActor"===a.constructor.name?this.avatarMaterial:this.cardMaterial;this.balls[t].position.set(r.x-i[0],r.y-i[1],r.z-i[2]),this.balls[t].material=e})}}}]}]}}}]);