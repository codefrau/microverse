"use strict";(globalThis.webpackChunk_croquet_microverse=globalThis.webpackChunk_croquet_microverse||[]).push([[205],{6205:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});const r={modules:[{name:"FinantialLight",pawnBehaviors:[class LightPawn{setup(){console.log("LightPawn");var e=this.service("ThreeRenderManager");e.scene,e.camera;let t=this.shape;this.removeLights();e=new Worldcore.THREE.AmbientLight(16777215,.5);t.add(e),this.lights.push(e);let s=new Worldcore.THREE.DirectionalLight(16777215,.5);s.position.set(-10,200,10),this.lights.push(s),t.add(s),this.constructBackground(this.actor._cardData),this.listen("updateShape","updateShape")}removeLights(){this.lights&&this.lights.forEach(e=>{this.shape.remove(e)}),this.lights=[]}teardown(){console.log("teardown lights"),this.background&&this.background.dispose(),this.removeLights()}updateShape(e){this.constructBackground(e)}constructBackground(t){let s=this.service("AssetManager").assetManager,r=t.dataType;if(t.dataLocation)return this.getBuffer(t.dataLocation).then(e=>s.load(e,r,Worldcore.THREE,t).then(e=>{var t=this.service("ThreeRenderManager"),s=t.renderer;let r=t.scene,a=new Worldcore.THREE.PMREMGenerator(s);a.compileEquirectangularShader();t=a.fromEquirectangular(e).texture;let i=r.background,o=r.environment;r.background=t,r.environment=t,o!==i&&i&&i.dispose(),o&&o.dispose(),e.dispose()}))}}]}]}}}]);